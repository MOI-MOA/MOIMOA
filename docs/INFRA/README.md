# Infra

## ✅ 배포 환경 구축 (담당: 이다영)

### 1️⃣ 웹서버
- **NGINX**를 사용하여 블루/그린 무중단 배포 구현
- HTTPS 적용 및 라우팅 설정

### 2️⃣ 배포 환경 구축과 CI/CD
- **Docker, Docker-compose**
  - 프론트엔드, 백엔드, DB, Redis 등 각 서비스 컨테이너화
  - 블루/그린 환경을 위한 별도 compose 파일 관리

- **Jenkins**
  - GitLab 웹훅을 통한 자동 빌드 및 배포 파이프라인 구축
  - 배포 과정: 코드 체크아웃 → 환경 구성 → 컨테이너 배포 → 헬스체크 → 트래픽 전환

- **Mattermost 알림 연동**
  - Jenkins 배포 결과를 Mattermost 채널로 자동 알림
  - 성공 시: 빌드 정보, 커밋 내역, 작성자, 배포 서버 정보 표시
  - 실패 시: 오류 원인 및 로그 확인 링크 제공
  - 팀 전체가 배포 상황을 실시간으로 모니터링 가능

  <img src="/docs/mm연동.png" alt="MM배포성공" />
  <img src="/docs/mm연동x.png" alt="MM배포실패" />

- **블루/그린 무중단 배포**
  - 두 개의 동일한 환경(블루/그린) 간 트래픽 전환으로 무중단 배포
  - 프론트엔드: 3001/3002 포트, 백엔드: 8081/8082 포트
  - 문제 발생 시 즉시 이전 환경으로 롤백 가능

- **AWS EC2**
  - 모든 서비스 AWS EC2 인스턴스에서 운영

<br>
